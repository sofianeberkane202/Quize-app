function e(e){return e&&e.__esModule?e.default:e}var t=globalThis,r={},n={},s=t.parcelRequiree238;null==s&&((s=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var s={id:e,exports:{}};return r[e]=s,t.call(s.exports,s,s.exports),s.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},t.parcelRequiree238=s),(0,s.register)("27Lyk",function(e,t){Object.defineProperty(e.exports,"register",{get:()=>r,set:e=>r=e,enumerable:!0,configurable:!0});var r,n=new Map;r=function(e,t){for(var r=0;r<t.length-1;r+=2)n.set(t[r],{baseUrl:e,path:t[r+1]})}}),s("27Lyk").register(new URL("",import.meta.url).toString(),JSON.parse('["4uVtf","index.4d90dd34.js","602Ft","icons.38d394c2.svg"]'));const i={questions:[],answers:new Map},o=function(...e){let t=new DOMParser,r=e.map(e=>t.parseFromString(e,"text/html").documentElement.textContent.trim());return 1===r.length?r[0]:r},a=async function(){try{let e=await fetch("https://opentdb.com/api.php?amount=10");if(console.log(e),!e.ok)throw Error("There is a problem Try Again");let t=await e.json();i.questions=t.results.map(e=>{let t=Array.isArray(e.correct_answer)?o(...e.correct_answer):o(e.correct_answer),r=o(...e.incorrect_answers);return{category:e.category,correctAnswer:t,difficulty:e.difficulty,incorrectAnswers:Array.isArray(r)?r:[r],question:e.question,type:e.type}}),console.log(i.questions)}catch(e){throw e}},c=function(e,t){i.answers.has(t)||i.answers.set(t,i.answers.get(t)||new Map),i.answers.get(t).set(e.id,e.answer.trim())},l=function(e,t){i.answers.get(t).delete(e.id)};var u={};u=new URL("icons.38d394c2.svg",import.meta.url).toString();class d{#e=document.querySelector(".timer");duration;timer;#t(e){return{minutes:Math.floor(e/60),seconds:e%=60}}#r(e,t){this.#e.querySelector("#minutes").textContent=`${t}`.padStart(2,0),this.#e.querySelector("#seconds").textContent=`${e}`.padStart(2,0)}#n(){this.duration--;let{minutes:e,seconds:t}=this.#t(this.duration);this.#r(t,e),0===this.duration&&(clearInterval(this.timer),v.moveToNextQuestion())}countDown(){this.duration=120,this.timer=setInterval(this.#n.bind(this),1e3)}}var h=new d;class m{#e=document.querySelector(".quiz");#s;#i;static currentActiveQuestionContainer=0;finalScore=0;#o="There is a problem Try Again";render(e){this.#i=e;let t=this.generateMarkup();this.#e.insertAdjacentHTML("afterbegin",t),this.#s=this.#e.querySelectorAll(".question-container")}generateMarkup(){return this.#i.map((e,t)=>{let r=this.#a([e.correctAnswer,...e.incorrectAnswers]);return`
      <div class="question-container ${0===t?"active":""}" data-id="${t}">
        <div class="question-box">
          <h1 class="question ${this.#c(e.question)?"small-ft":""}" id="question" >
            ${e.question}
          </h1>
        </div>

        <ul class="answers">
          ${this.#l(r)}
        </ul>
      </div>         
      `}).join("")}#l(t){return t.map((t,r)=>`
          <li class="answer" data-id="answer${r+1}">
            <svg class="icon-unchecked">
              <use href="${/*@__PURE__*/e(u)}#icon-radio-unchecked"></use>
            </svg>
            <span answer
              >${t}</
            span>
          </li>
      `).join("")}#a(e){for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}#c(e){return e.length>70}renderError(e=this.#o){let t=this.#u(e);this.#e.insertAdjacentHTML("afterbegin",t)}#u(){return`
    <div class="error-Message">
        <p>
          There is a problem Try Again
        </p>
          <i class="fa-solid fa-triangle-exclamation"></i>
      </div>
    `}#d(){this.#s[m.currentActiveQuestionContainer].classList.remove("active"),m.currentActiveQuestionContainer++,this.#s[m.currentActiveQuestionContainer].classList.add("active")}#h(){this.#s[m.currentActiveQuestionContainer].classList.remove("active"),m.currentActiveQuestionContainer--,this.#s[m.currentActiveQuestionContainer].classList.add("active")}#m(e){this.#v(),e(),this.#q()}moveToNextQuestion(){if(m.currentActiveQuestionContainer===this.#s.length-1){clearInterval(h.timer),this.#e.querySelector(".btn-quiz").querySelectorAll(".btn").forEach(e=>e.classList.toggle("active"));return}this.#d(),h.countDown();let e=this.#e.querySelector(".questions").querySelector(".current-question"),t=+e.textContent;e.textContent=t+1}addHandlerChooseQuestion(t){this.#e.addEventListener("click",r=>{let n=r.target.closest(".answer");if(!n)return;let s=n.querySelector("[answer]").textContent,i=+n.closest(".question-container").dataset.id;n.querySelector("svg").classList.toggle("icon-unchecked"),n.querySelector("svg").classList.toggle("icon-checked");let o=n.querySelector("svg").querySelector("use");n.querySelector("svg").classList.contains("icon-unchecked")&&(o.setAttribute("href",`${/*@__PURE__*/e(u)}#icon-radio-unchecked`),t({answer:s,id:n.dataset.id},!1,i)),n.querySelector("svg").classList.contains("icon-checked")&&(o.setAttribute("href",`${/*@__PURE__*/e(u)}#icon-radio-checked`),t({answer:s,id:n.dataset.id},!0,i))})}addHandlerLoadQuestions(e){window.addEventListener("load",e)}addHandlerValidQuestion(){this.#e.addEventListener("click",e=>{e.target.closest(".explore")&&(clearInterval(h.timer),this.moveToNextQuestion())})}#v(){let e=this.#e.querySelector(".btn-quiz"),t=this.#e.querySelector(".timer"),r=this.#e.querySelector(".questions"),n=this.#e.querySelector(".show-results-btn");[e,t,r].forEach(e=>e.classList.add("hidden")),n.classList.remove("hidden"),this.#s[m.currentActiveQuestionContainer].classList.remove("active")}#p(){m.currentActiveQuestionContainer=0;let e=this.#e.querySelector(".questions"),t=this.#e.querySelector(".move-btn"),r=this.#e.querySelector(".show-results-btn"),n=this.#e.querySelector(".final-result");[e,t].forEach(e=>e.classList.remove("hidden")),[r,n].forEach(e=>e.classList.add("hidden")),t.querySelector(".left").classList.add("hidden"),this.#s[m.currentActiveQuestionContainer].classList.add("active"),e.querySelector(".current-question").textContent=m.currentActiveQuestionContainer+1,this.#e.querySelectorAll(".answer").forEach(e=>e.style.pointerEvents="none")}#q(){this.finalScore=100*this.finalScore/10;let e=this.#e.querySelector(".final-result");e.querySelector(".final-score .percentage").textContent=this.finalScore,console.log(this.finalScore),this.#e.querySelector(".final-score").style.background=`conic-gradient(var(--primary-color) 0% ${this.finalScore}%, #f5f5f5 ${this.finalScore}% 100%)`,e.classList.remove("hidden")}renderEvaluation(t,r,n){let s=this.#e.querySelector(`[data-id="${r}"]`);s.querySelectorAll(".answer").forEach(t=>{t.querySelector("[answer]").textContent.trim()===n.correctAnswer&&(t.classList.add("true"),t.querySelector("svg").classList.remove("icon-unchecked"),t.querySelector("svg").classList.add("icon-checked"),t.querySelector("svg").querySelector("use").setAttribute("href",`${/*@__PURE__*/e(u)}#icon-radio-checked`))}),t.forEach((e,t)=>{e!==n.correctAnswer&&s.querySelector(`[data-id="${t}"]`).classList.add("false"),e===n.correctAnswer&&(this.finalScore+=1)})}addHandlerEndQuiz(e){this.#e.querySelector(".end-of-quiz").addEventListener("click",()=>{this.#m(e)})}addHandlerShowResults(){this.#e.querySelector(".show-results-btn").addEventListener("click",()=>{this.#p()})}addHandlerMoveBetweenQuestions(){this.#e.addEventListener("click",e=>{let t=e.target.closest(".btn");if(!t)return;let r=this.#e.querySelector(".questions").querySelector(".current-question");if(t.classList.contains("left")&&(this.#h(),r.textContent=m.currentActiveQuestionContainer+1,0===m.currentActiveQuestionContainer)||t.classList.contains("right")&&(this.#d(),r.textContent=m.currentActiveQuestionContainer+1,m.currentActiveQuestionContainer===this.#s.length-1)){t.classList.add("hidden");return}m.currentActiveQuestionContainer>0&&m.currentActiveQuestionContainer<this.#s.length-1&&this.#e.querySelector(".move-btn").querySelectorAll(".btn").forEach(e=>e.classList.remove("hidden"))})}}var v=new m;const q=async function(){try{await a(),v.render(i.questions),h.countDown()}catch(e){v.renderError(e)}};v.addHandlerLoadQuestions(q),v.addHandlerChooseQuestion(function(e,t,r){t?c(e,r):l(e,r)}),v.addHandlerValidQuestion(),v.addHandlerEndQuiz(function(){i.answers.forEach((e,t)=>{v.renderEvaluation(e,t,i.questions[t])})}),v.addHandlerShowResults(),v.addHandlerMoveBetweenQuestions();
//# sourceMappingURL=index.4d90dd34.js.map
